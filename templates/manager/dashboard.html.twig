{% extends 'base.html.twig' %}

{% block stylesheets %}
    <style>
    #chartdiv {
      width: 100%;
      height: 500px;
    }
    </style>
    {{ parent() }}
{% endblock %}

{% block title %}Dashboard Manager{% endblock %}

{% block body %}
<div class="dashboard-header">
    <div class="logout-button">
        <a href="{{ path('app_logout') }}" class="btn btn-danger">Logout</a>
    </div>
    <h1 class="dashboard-title">Dashboard Manager</h1>
    <p class="dashboard-description">Cantidad de productos por cada talla</p>
</div>

<div id="chartdiv"></div>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script>
am5.ready(function() {
    // Create root element
    var root = am5.Root.new("chartdiv");

    // Set themes
    root.setThemes([
        am5themes_Animated.new(root)
    ]);

    // Create chart
    var chart = root.container.children.push(am5xy.XYChart.new(root, {
        panX: true,
        panY: true,
        wheelX: "panX",
        wheelY: "zoomX",
        pinchZoomX: true
    }));

    // Add cursor
    var cursor = chart.set("cursor", am5xy.XYCursor.new(root, {}));
    cursor.lineY.set("visible", false);

    // Create axes
    var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
        categoryField: "category",
        renderer: am5xy.AxisRendererX.new(root, {}),
        tooltip: am5.Tooltip.new(root, {})
    }));

    var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
        renderer: am5xy.AxisRendererY.new(root, {})
    }));

    // Create series
    var series = chart.series.push(am5xy.ColumnSeries.new(root, {
        name: "Series 1",
        xAxis: xAxis,
        yAxis: yAxis,
        valueYField: "quantity",
        categoryXField: "category",
        tooltip: am5.Tooltip.new(root, {
            labelText: "{valueY}"
        })
    }));

    series.columns.template.setAll({ cornerRadiusTL: 5, cornerRadiusTR: 5 });

    // Set data
    var data = {{ dataForChart | raw }};
    xAxis.data.setAll(data);
    series.data.setAll(data);

    // Make stuff animate on load
    series.appear(1000);
    chart.appear(1000, 100);
});
</script>
{% endblock %}
